<!-- Book List Table -->

<table class="table table-striped table-bordered">

  <thead class="table-dark">

    <tr>

      <th>Book ID</th>

      <th>Title</th>

      <th>Author</th>

      <th>Genre</th>

      <th>Availability</th>

      <th>Stock</th>

      <th th:if="${#authorization.expression('hasRole(''ADMIN'')')}">Actions</th>

      <th th:if="${#authorization.expression('hasRole(''USER'')')}">Borrow/Request</th>

    </tr>

  </thead>

  <tbody>

    <tr th:each="book : ${books}">

      <td th:text="${book.bookId}"></td>

      <td th:text="${book.bookName}"></td>

      <td th:text="${book.bookAuthor}"></td>

      <td th:text="${book.bookGenre}"></td>

      <td th:text="${book.availabilityStatus == 'Y' ? 'Available' : 'Not Available'}"></td>

      <td th:text="${book.stock}"></td>



      <!-- Admin Actions -->

      <td th:if="${#authorization.expression('hasRole(''ADMIN'')')}">

        <a th:href="@{'/books/edit/' + ${book.bookId}}" class="btn btn-warning btn-sm">‚úèÔ∏è Edit</a>

        <a th:href="@{'/books/delete/' + ${book.bookId}}" class="btn btn-danger btn-sm" onclick="return confirm('Are you sure you want to delete this book?');">üóëÔ∏è Delete</a>

      </td>



      <!-- User Actions -->

      <td th:if="${#authorization.expression('hasRole(''USER'')')}">

        <button th:if="${book.availabilityStatus == 'Y'}" class="btn btn-success btn-sm" th:onclick="'borrowBook(' + ${book.bookId} + ')'">üìñ Borrow</button>

        <button class="btn btn-primary btn-sm" th:onclick="'requestBook(' + ${book.bookId} + ')'">üì• Request Book</button>

      </td>

    </tr>

  </tbody>

</table>



<script>

  function borrowBook(bookId) {

    if (confirm('Are you sure you want to borrow this book?')) {

      window.location.href = '/borrow-records/borrow/' + bookId;

    }

  }



  function requestBook(bookId) {

    if (confirm('Would you like to request this book?')) {

      window.location.href = '/borrow-records/request/' + bookId;

    }

  }

</script>